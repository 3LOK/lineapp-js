var creditcard=creditcard||{};creditcard.NETWORK_VISA="visa";creditcard.NETWORK_MASTERCARD="mastercard";creditcard.NETWORK_AMERICAN_EXPRESS="amex";creditcard.NETWORK_DINERS="diners";creditcard.NETWORK_DISCOVER="discover";creditcard.NETWORK_ISRACARD="isracard";creditcard.NETWORK_MAESTRO="maestro";creditcard.NETWORK_SWITCH="switch";
creditcard.ALL_NETWORKS=[creditcard.NETWORK_VISA,creditcard.NETWORK_MASTERCARD,creditcard.NETWORK_AMERICAN_EXPRESS,creditcard.NETWORK_DINERS,creditcard.NETWORK_DISCOVER,creditcard.NETWORK_ISRACARD,creditcard.NETWORK_MAESTRO,creditcard.NETWORK_SWITCH];creditcard.BankCard=creditcard.BankCard||function(b){return function(a){var d=a.iin,c=a.network,b=a.valid;return{getIin:function(){return d},getNetwork:function(){return c},isValid:function(){return b}}}(b)};
creditcard.LuhnValidator=creditcard.LuhnValidator||function(){return function(){var b={calculateLuhnSum:function(a){a=(a+"").replace(/\D+/g,"").split("").reverse();if(!a.length)return!1;for(var b=0,c=0,e=a.length;c<e;++c)a[c]=parseInt(a[c]),b+=c%2?2*a[c]-(4<a[c]?9:0):a[c];return b%10},validate:function(a){return 0==b.calculateLuhnSum(a)}};return b}()};
creditcard.IsracardValidator=creditcard.IsracardValidator||function(){return function(){var b={calculateIsracardSum:function(a){for(var b=0,c=1,e=a.length;c<=e;++c)b+=c*parseInt(a.charAt(e-c));return b%11},validate:function(a){return 0==b.calculateIsracardSum(a)}};return b}()};
creditcard.Parser=creditcard.Parser||function(){var b={},a=new creditcard.LuhnValidator,d=new creditcard.IsracardValidator,c=[{network:creditcard.NETWORK_VISA,pattern:/^4[0-9]{12}([0-9]{3})?$/,validator:a},{network:creditcard.NETWORK_MASTERCARD,pattern:/^5[1-5][0-9]{14}$/,validator:a},{network:creditcard.NETWORK_AMERICAN_EXPRESS,pattern:/^3[47][0-9]{13}$/,validator:a},{network:creditcard.NETWORK_DINERS,pattern:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,validator:a},{network:creditcard.NETWORK_DISCOVER,pattern:/^6(?:011|5[0-9]{2})[0-9]{12}$/,
validator:a},{network:creditcard.NETWORK_ISRACARD,pattern:/^[0-9]{8,9}$/,validator:d},{network:creditcard.NETWORK_MAESTRO,pattern:/^(5018|5020|5038|6304|6759|6761|6762|6763)[0-9]{8}([0-9]?){7}$/,validator:a},{network:creditcard.NETWORK_SWITCH,pattern:/^((4903|4905|4911|4936|6333)[0-9]{2}|564182|633110)[0-9]{10}([0-9]{2,3})?$/,validator:a}];b.parse=function(a){for(var b=0,d=c.length;b<d;++b){var f=c[b];if(a.match(f.pattern))return new creditcard.BankCard({iin:a,network:f.network,valid:f.validator?
f.validator.validate(a):!0})}return null};return b}();creditcard.parse=creditcard.Parser.parse;
