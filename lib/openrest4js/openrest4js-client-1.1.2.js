var openrest=openrest||{};
openrest.Client=openrest.Client||function(i){return function(a){var a=a||{},e=a.apiUrl||"https://api.openrest.com/v1.1",f=a.accessToken||null,a={},d=new openrest.Protocol;a.getAccessToken=function(){return f};a.setAccessToken=function(b){f=b};a.getMyRoles=function(b){var c=new openrest.QueryStringBuilder(b.params);c.append("access_token",f);d.get({url:e+"/me/roles/"+c.toString(),callback:b.callback})};a.getMeInfo=function(b){var c=new openrest.QueryStringBuilder(b.params);c.append("access_token",
f);d.get({url:e+"/me/info"+c.toString(),callback:b.callback})};a.setMeInfo=function(b){var c=new openrest.QueryStringBuilder(b.params);c.append("access_token",f);d.set({url:e+"/me/info"+c.toString(),obj:b.obj,callback:b.callback})};a.getMePayments=function(b){var c=new openrest.QueryStringBuilder(b.params);c.append("access_token",f);d.get({url:e+"/me/payments/"+c.toString(),callback:b.callback})};a.deletePayment=function(b){var c=new openrest.QueryStringBuilder(b.params);c.append("access_token",f);
d.remove({url:e+"/me/payments/"+b.id+c.toString(),callback:b.callback})};a.getOrders=function(b){var c=new openrest.QueryStringBuilder(b.params);c.append("access_token",f);d.get({url:e+"/orders/"+c.toString(),callback:b.callback})};a.getOrderHtmlUrl=function(b){var c=new openrest.QueryStringBuilder(b.params);c.append("access_token",f);return e+"/orders/"+b.id+c.toString()};a.getRestaurants=function(b){var c=new openrest.QueryStringBuilder(b.params);d.get({url:e+"/restaurants/"+c.toString(),callback:b.callback})};
a.search=function(b){var c=new openrest.QueryStringBuilder(b.params);d.get({url:e+"/search"+c.toString(),callback:b.callback})};a.getRestaurantsFull=function(b){var c=new openrest.QueryStringBuilder(b.params);d.get({url:e+"/restaurants.full/"+c.toString(),callback:b.callback})};a.request=function(b){b=b||{};d.add({url:e,obj:b.request||{},callback:b.callback||function(){}})};return a}(i)};openrest=openrest||{};
openrest.Protocol=openrest.Protocol||function(i){return function(a){var a=a||{},e=a.timeout||6E4,f=a.userAgent||"openrest4js (gzip)";return{get:function(d){var d=d||{},b=d.url,c=d.callback||function(){},a=http.create({onload:function(){c(JSON.parse(a.responseText))},onerror:function(){c({error:"protocol",errorMessage:"protocol error"})},timeout:e});a.open("GET",b);a.setUserAgent(f);a.setRequestHeader("Accept","application/json");a.send()},set:function(d){var d=d||{},b=d.url,c=d.obj,a=d.callback||
function(){},g=http.create({onload:function(){a(JSON.parse(g.responseText))},onerror:function(){a({error:"protocol",errorMessage:"protocol error"})},timeout:e});g.open("PUT",b);g.setUserAgent(f);g.setRequestHeader("Accept","application/json");g.setRequestHeader("Content-Type","application/json");g.send(JSON.stringify(c))},add:function(a){var a=a||{},b=a.url,c=a.obj,h=a.callback||function(){},g=http.create({onload:function(){h(JSON.parse(g.responseText))},onerror:function(){h({error:"protocol",errorMessage:"protocol error"})},
timeout:e});g.open("POST",b);g.setUserAgent(f);g.setRequestHeader("Accept","application/json");g.setRequestHeader("Content-Type","application/json");g.send(JSON.stringify(c))},remove:function(a){var a=a||{},b=a.url,c=a.callback||function(){},h=http.create({onload:function(){c(JSON.parse(h.responseText))},onerror:function(){c({error:"protocol",errorMessage:"protocol error"})},timeout:e});h.open("DELETE",b);h.setUserAgent(f);h.setRequestHeader("Accept","application/json");h.send()}}}(i)};openrest=openrest||{};openrest.QueryStringBuilder=openrest.QueryStringBuilder||function(i){return function(a){var e={},f="";e.append=function(b,a){"undefined"===typeof b||("undefined"===typeof a||null===a)||(f+=(0===f.length?"?":"&")+encodeURIComponent(b)+"="+encodeURIComponent(a))};if(a)for(var d in a)e.append(d,a[d]);e.toString=function(){return f};return e}(i)};
