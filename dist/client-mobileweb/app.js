var http=http||{};
http.Factory=http.Factory||function(){return{create:function(a){var a=a||{},e=a.timeout||6E4,b=a.onload||function(){},f=a.onerror||function(){},c=a.onprogress||function(){},a=a.ontimeout||function(){};if("undefined"!==typeof XDomainRequest){var d=new XDomainRequest;d.timeout=e;d.onload=function(){d.fix=!0;b()};d.onerror=f;d.onprogress=c;d.ontimeout=a;d.setRequestHeader=function(){};d.setUserAgent=function(){};return d}if("undefined"!==typeof XMLHttpRequest){var g=new XMLHttpRequest;g.timeout=e;g.onload=
b;g.onerror=f;g.onprogress=c;g.ontimeout=a;g.setUserAgent=function(){};return g}if("undefined"!==typeof Ti){var h=Ti.Network.createHTTPClient({timeout:e,onload:b,onerror:f,onprogress:c,ontimeout:a});h.setUserAgent=function(a){h.setRequestHeader("User-Agent",a)};return h}throw Error("Could not find an HttpClient implementation.");}}}();http.create=http.create||http.Factory.create;var lineapp=lineapp||{};
lineapp.EventHub=lineapp.EventHub||function(){return function(){var a={},e={};a.addEventListener=function(a,f){var c=e[a];"undefined"===typeof c&&(c=[],e[a]=c);c.push(f)};a.removeEventListener=function(a,f){var c=e[a];if("undefined"!==typeof c){var d=c.indexOf(f);-1!==d&&c.splice(d,1);0==c.length&&delete e[a]}};a.removeAllListeners=function(){e={}};a.addGeneralEventListener=function(b){a.addEventListener("__all__",b)};a.removeGeneralEventListener=function(b){a.removeEventListener("__all__",b)};a.fireEvent=
function(a,f){var c=e[a];if("undefined"!==typeof c)for(var d=0,g=c.length;d<g;++d)c[d](f);c=e.__all__;if("undefined"!==typeof c){d=0;for(g=c.length;d<g;++d)c[d](a,f)}};a.getNumListeners=function(){var a=0,f;for(f in e)a+=e[f].length;return a};return a}()};lineapp=lineapp||{};lineapp.LineManagement=lineapp.LineManagement||function(a){return function(){var a=new lineapp.EventHub;a.init=function(){};a.handleEvents=function(){};a.getLines=function(){};return a}(a)};lineapp=lineapp||{};
lineapp.Facebook="undefined"!==typeof FB?lineapp.Facebook||function(){function a(){c=f=null;b.fireEvent("logout")}function e(a){b.login(a.userID,a.accessToken)}var b=new lineapp.EventHub,f=null,c=null,d=!1,g=null;b.init=function(b){var b=b||{},c=b.channelUrl||null;g=b.appId||null;d=b.dontUseFB||!1;d||(FB.init({appId:g,channelUrl:c,status:!0,cookie:!0,xfbml:!0,oauth:!0}),FB.getLoginStatus(function(b){b.authResponse?e(b.authResponse):a()}))};b.getLoggedIn=function(){return null!==f};b.getAccessToken=
function(){return f};b.authorize=function(){d||FB.login(function(b){b.authResponse?e(b.authResponse):a()},void 0)};b.getUid=function(){return c};b.logout=function(){d?a():FB.logout()};b.getGraphPath=function(a,e,c){var d=http.create({onload:function(){c({success:!0,result:d.responseText})},onerror:function(a){c({error:!0,event:a})}}),a="https://graph.facebook.com/"+a,e=new lineapp.QueryStringBuilder(e);e.append("access_token",b.getAccessToken());a+=e.toString();d.autoEncodeUrl=!1;d.open("GET",a);
d.send()};b.login=function(a,e){f=e;c=a;b.fireEvent("login",{success:!0});lineapp.LineAppService.request({request:{type:"extend",accessToken:f,fbAppId:g},callback:function(a){a.error||(f=a.value.accessToken)}})};FB.Event.subscribe("auth.login",function(a){e(a.authResponse)});FB.Event.subscribe("auth.logout",function(){a()});return b}():lineapp.Facebook||function(){var a=new lineapp.EventHub;a.init=function(){};a.getLoggedIn=function(){return!1};a.getAccessToken=function(){return null};a.authorize=
function(){};a.getUid=function(){return null};a.logout=function(){};a.getGraphPath=function(a,b,f){f({error:!0})};return a}();lineapp=lineapp||{};lineapp.LineAppPresenter=lineapp.LineAppPresenter||function(a){return function(){var a=new lineapp.EventHub,b=new lineapp.LineAppView;new lineapp.LineManagement;a.open=function(){lineapp.Facebook.getLoggedIn()||lineapp.Facebook.authorize()};a.getView=function(){return b};return a}(a)};lineapp=lineapp||{};
lineapp.LineAppView=lineapp.LineAppView||function(a){return function(){var a=new lineapp.EventHub,b=$("<div></div>");a.showWaiting=function(){};a.hideWaiting=function(){};a.showLogin=function(a){b.empty();b.add(a.getDom())};a.getDom=function(){return b};return a}(a)};if("undefined"===typeof console)var console={log:function(){},warn:function(){}};var localurl=window.location.protocol+"//"+window.location.host;
function init(){lineapp.Facebook.init({appId:"136436869735932",channelUrl:localurl+"/static/channel.html"});var a=lineapp.LineAppPresenter();$(body).append(a.getView());a.open()}init();
